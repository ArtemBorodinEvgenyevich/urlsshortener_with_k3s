# ============================================================
# PostgreSQL Configuration
# ============================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=urlshortener
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=urlshortener
POSTGRES_SSL_MODE=disable

# ============================================================
# Database Timeout Configuration
# ============================================================
# Timeout for establishing database connection
DB_CONNECT_TIMEOUT=10s

# Timeout for application-level queries (used in repository layer)
DB_QUERY_TIMEOUT=5s

# Timeout for statements on PostgreSQL server level
# This is set as statement_timeout runtime parameter
DB_STATEMENT_TIMEOUT=5s

# ============================================================
# Database Connection Pool Configuration
# ============================================================
# Maximum number of connections in the pool
DB_MAX_CONNS=25

# Minimum number of idle connections in the pool
DB_MIN_CONNS=5

# Maximum lifetime of a connection (prevents stale connections)
DB_MAX_CONN_LIFETIME=1h

# Maximum time a connection can be idle before being closed
DB_MAX_CONN_IDLE_TIME=30m

# Period for health checks on idle connections
DB_HEALTH_CHECK_PERIOD=1m

# ============================================================
# Redis Configuration
# ============================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=redis
REDIS_DB=0

# ============================================================
# Redis Timeout Configuration
# ============================================================
# Timeout for establishing connection to Redis
REDIS_DIAL_TIMEOUT=5s

# Timeout for read operations
REDIS_READ_TIMEOUT=3s

# Timeout for write operations
REDIS_WRITE_TIMEOUT=3s

# ============================================================
# Redis Connection Pool Configuration
# ============================================================
# Maximum number of socket connections
REDIS_POOL_SIZE=10

# Minimum number of idle connections
REDIS_MIN_IDLE_CONNS=5

# Maximum number of retries for failed commands
REDIS_MAX_RETRIES=3

# ============================================================
# Application Configuration
# ============================================================
APP_PORT=9091
APP_ENV=production

# ============================================================
# Cache Configuration
# ============================================================
CACHE_ENABLED=true
CACHE_TTL_MINUTES=5

# ============================================================
# GOOSE Configuration
# ============================================================
GOOSE_DRIVER=postgres
GOOSE_DBSTRING=postgres://urlshortener:your_secure_password_here@localhost:5432/urlshortener?sslmode=disable
GOOSE_MIGRATION_DIR=./db/migrations
